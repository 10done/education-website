{% extends "base.html" %}

{% block title %}
  Order Management - {{ storefront.name }}
{% endblock title %}
{% block content %}
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-4">Order Management</h1>
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
      {% if orders %}
        <table class="min-w-full divide-y divide-gray-200">
          <thead>
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Order ID</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {% for order in orders %}
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">{{ order.id }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ order.user.get_full_name|default:order.user.username }}</td>
                <td class="px-6 py-4 whitespace-nowrap">${{ order.total_price }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ order.get_status_display }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ order.created_at|date:"Y-m-d H:i" }}</td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <a href="{% url 'order_detail' order.id %}"
                     class="text-indigo-600 hover:text-indigo-900">View</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="text-gray-600 dark:text-gray-400">No orders found.</p>
      {% endif %}
    </div>
  </div>
{% endblock content %}
