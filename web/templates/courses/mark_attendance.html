{% extends "base.html" %}

{% load static %}

{% block title %}
  Mark Attendance - {{ session.title }}
{% endblock title %}
{% block content %}
  <div class="container py-4">
    <h1 class="mb-4">Mark Attendance - {{ session.title }}</h1>
    <div class="rounded-lg border border-gray-300 dark:border-gray-600 p-6 bg-white dark:bg-gray-800">
      <form method="post">
        {% csrf_token %}
        <table class="w-full">
          <thead>
            <tr>
              <th class="text-left py-2">Student</th>
              <th class="text-left py-2">Status</th>
            </tr>
          </thead>
          <tbody>
            {% for enrollment in enrollments %}
              <tr>
                <td class="py-2">{{ enrollment.student.get_full_name }}</td>
                <td class="py-2">
                  <select name="student_{{ enrollment.student.id }}"
                          class="block w-full border {% if field.errors %}border-red-500 dark:border-red-500{% else %}border-gray-300 dark:border-gray-600{% endif %} rounded p-2 focus:outline-none focus:ring-2 focus:ring-teal-300 dark:focus:ring-teal-800 bg-white dark:bg-gray-800">
                    <option value="present"
                            {% if attendances.enrollment.student.id == "present" %}selected{% endif %}>Present</option>
                    <option value="absent"
                            {% if attendances.enrollment.student.id == "absent" %}selected{% endif %}>Absent</option>
                    <option value="excused"
                            {% if attendances.enrollment.student.id == "excused" %}selected{% endif %}>Excused</option>
                    <option value="late"
                            {% if attendances.enrollment.student.id == "late" %}selected{% endif %}>Late</option>
                  </select>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <div class="mt-4 space-x-2">
          <button type="submit"
                  class="px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-300 dark:focus:ring-teal-700">
            Save Attendance
          </button>
          <a href="{% url 'course_detail' slug=session.course.slug %}"
             class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600">
            Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
{% endblock content %}
